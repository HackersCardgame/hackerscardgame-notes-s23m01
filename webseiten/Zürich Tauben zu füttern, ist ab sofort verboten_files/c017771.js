(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{196:function(e,t,n){"use strict";n.r(t);var r=n(31),o=n(381),l=n(8),d=n.n(l),c=n(15),m=n(16),h=n.n(m),w={name:"BTAPersonalizedCompanionFeed",components:{SimpleArticle:()=>Promise.resolve().then(n.bind(null,48))},mixins:[o.a],props:{hidden:{type:Boolean,default:!1},articleId:{type:String,default(){return this.$store.state.metadata.nzzId}},feedUrl:{type:Function,default(component){let e="";return component.isDE&&component.$config.btaCompanionFeed&&component.$config.btaCompanionFeed.de?e=`${component.$config.enricoC1Base.replace("/v1","")}${component.$config.btaCompanionFeed.de}`:component.$config.btaCompanionFeed&&component.$config.btaCompanionFeed.ch&&(e=`${component.$config.enricoC1Base.replace("/v1","")}${component.$config.btaCompanionFeed.ch}`),e}},trackComponent:{type:Function,default:component=>({componentID:`bta-companion-${component.articleId}`,componentName:"bta companion",componentSubType1:"cms",componentSubType2:"",componentType:"ui"})},eventDataViewed:{type:Function,default:component=>({eventInfo:{eventName:"UI Interaction",eventAction:"display",eventPosition:"",eventValue:"",eventNonInteractive:!0,type:"ui",timeStamp:new Date,componentID:`bta-section-${component.articleId}`,componentName:"bta companion"},category:{primaryCategory:"ui",subCategory1:"bta container",subCategory2:"companion",subCategory3:"standard"}})},referrerType:{type:String,default:"btaCompanionTeaser"}},data:()=>({articles:[]}),computed:{isDE(){return this.$store.getters.isDE},linkUrl:()=>"/meine-nzz/leseempfehlungen",throttledIsVisible(){return h()(this.isVisibleInViewport,1e3)},routeChange(){return this.$store.state.previousRoute.fullPath}},watch:{routeChange(){window.removeEventListener("scroll",this.throttledIsVisible)}},async mounted(){this.addTracking(),setTimeout((()=>{this.throttledIsVisible()})),window.addEventListener("scroll",this.throttledIsVisible);if(!this.articles.length){let e=this.feedUrl(this);if(e)try{const t=await d.a.request({...Object(c.a)(this.$config.enricoBasicAuth),withCredentials:!0,url:e}).then((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)||[]}));this.articles=t.filter((article=>{const{nzzId:e}=article.metadata;return e!==this.articleId&&!this.$store.state.readArticles.includes(e)})).slice(0,8)}catch(e){console.log(e)}}},destroyed(){window.removeEventListener("scroll",this.throttledIsVisible)},methods:{transformArticleData:r.b,addTracking(){window.deferred((()=>{window.dispatchEvent(new window.CustomEvent("tms:component:create",{detail:this.trackComponent(this)}))}))},isVisibleInViewport(){const e=this;this.$el instanceof HTMLElement&&this.$el.getBoundingClientRect().top<window.innerHeight&&(this.$el.classList.contains("hidden")||(window.deferred((()=>{window.dispatchEvent(new window.CustomEvent("tms:event:push",{detail:{...e.eventDataViewed(e)}}))})),window.removeEventListener("scroll",this.throttledIsVisible)))}}},f=w,v=n(1),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.articles.length>0?n("section",{staticClass:"pageelement bta",class:{hidden:e.hidden},attrs:{"data-nzz-container":"","data-source-element":"bta-companion"}},[n("div",{staticClass:"container--headline-bta container--headline-bta-feed"},[n("h3",{staticClass:"container__header-title--bta container__header-title--bta--hide-mobile"},[e._v("\n      Für Sie empfohlen\n    ")]),e._v(" "),n("nuxt-link",{staticClass:"bta-link",attrs:{to:e.linkUrl,"data-nzz-referrer":"btaLinkCompanion"}},[n("h3",{staticClass:"container__header-title--bta container__header-title--bta--show-mobile"},[e._v("\n        Für Sie empfohlen\n      ")]),e._v(" "),n("span",{staticClass:"container__header-title--bta--hide-mobile"},[e._v("Weitere Artikel")]),e._v(" "),n("svgicon",{staticClass:"little-chevron",attrs:{height:"11",width:"11",name:"nzz_little_chevron",color:"r-#000000"}})],1)],1),e._v(" "),n("div",{staticClass:"widget__row widget__row--bta-feed"},e._l(e.articles.slice(0,2),(function(article,t){return n("div",{key:article.metadata.nzzId,staticClass:"widget--1of2 widget--article",attrs:{"data-source-element-widget":"Widget-Companion-Feed"}},e._l(e.transformArticleData({articles:[article]},e.$store.state.header.pagetype),(function(r,i){return n("SimpleArticle",{key:"article-"+r.metadata.nzzId+"-"+i,attrs:{data:r,index:i,styles:article.styles,size:0===t?"1of2":"companion-feed-bta","referrer-type":e.referrerType,"teaser-title-tag":"h3"}})})),1)})),0),e._v(" "),n("div",{staticClass:"widget__row widget__row--bta-feed"},e._l(e.articles.slice(2,5),(function(article){return n("div",{key:article.metadata.nzzId,staticClass:"widget--1of3 widget--article",attrs:{"data-source-element-widget":"Widget-Companion-Feed"}},e._l(e.transformArticleData({articles:[article]},e.$store.state.header.pagetype),(function(e,t){return n("SimpleArticle",{key:"article-"+e.metadata.nzzId+"-"+t,attrs:{data:e,index:t,styles:article.styles,size:"companion-feed-bta","referrer-type":"btaCompanionTeaser","teaser-title-tag":"h3"}})})),1)})),0),e._v(" "),n("div",{staticClass:"widget__row widget__row--bta-feed"},e._l(e.articles.slice(5),(function(article){return n("div",{key:article.metadata.nzzId,staticClass:"widget--1of3 widget--article",attrs:{"data-source-element-widget":"Widget-Companion-Feed"}},e._l(e.transformArticleData({articles:[article]},e.$store.state.header.pagetype),(function(e,t){return n("SimpleArticle",{key:"article-"+e.metadata.nzzId+"-"+t,attrs:{data:e,index:t,styles:article.styles,size:"companion-feed-bta","referrer-type":"btaCompanionTeaser","teaser-title-tag":"h3"}})})),1)})),0)]):e._e()}),[],!1,null,null,null);t.default=component.exports}}]);