"object"==typeof TEST&&prepareTest(TEST),jQuery(function(t){if(t(".qcont").length){TEST=TEST||{};var e=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n=function(){var n,a=TEST.answers[TEST.current_question.id];t("input[name=answer]").prop("checked",!1),t(".qcont .answer.selected").removeClass("selected"),t(".qcont .icon-check").removeClass("icon-check").addClass("icon-cancel"),e(a)&&(n=t('input[name="answer"]').filter(function(){return e(t(this).val())&&t(this).val()==a}).first(),n.length&&(n.prop("checked","checked"),n.closest("label").addClass("selected").children("i").first().addClass("icon-check")))},a=function(e,a){return TEST.answers[TEST.current_question.id]=t("input[name=answer]:checked").val(),n(),!a||e.focus()};t(document).on("change",'.qcont input[name="answer"]',function(e){e.preventDefault,a(t(this),!0)}),a(t('.qcont input[name="answer"]'),!1);var s=function(){if(TEST.cookie("answers-"+TEST.test_main_id+"-"+TEST.locale+"v1",JSON.stringify(TEST.answers),TEST.WEEK_IN_SECONDS),TEST._cookie_start_at+1>TEST.questions.length)return TEST.finish()},i=function(){var a,s=t(".qcont"),i=t(".question",s).first(),r=TEST.current_question,T=(TEST.answers[r.id],t(".progress span",s)),c=t(".qnum",s),o=t(".anscont",s);return o.html(""),i.html(r[e(TEST.answers[0])&&0==+TEST.answers[0]&&"text_self"in r?"text_self":"text"]).animateText(),t.each(r.answers,function(t,e){o.append(TEST.ansTpl.replace("{value}",t).replace("{answer}",e.text))}),n(),T.css({width:100*TEST.start_at/TEST.questions.length+"%"}),c.text(TEST.start_at),TEST.start_at>1?t(".qnav.back").removeClass("disabled"):t(".qnav.back").addClass("disabled"),t(".qnav.next").removeClass("disabled"),a=t(".qnav.next .text"),a.data("finish")&&(TEST.start_at+1>TEST.questions.length?(a.attr("data-text",a.text()),a.text(a.data("finish"))):a.attr("data-text")&&a.text(a.attr("data-text"))),t("input[name=answer]:checked").first().length?t("input[name=answer]:checked").first().focus():t('input[name="answer"]',s).last().focus()},r=function(){var e=t(".qnav.back");TEST.start_at>1?e.css({visibility:"visible"}):e.css({visibility:"hidden"})};r(),t(document).on("click",".qnav.next",function(n){n.preventDefault();var a=t(this),T=a.closest(".qcont"),c=t("input[name=answer]:checked").val(),o=TEST.current_question;if(!a.hasClass("disabled")){if(a.addClass("disabled"),e(c)){if(TEST.answers[o.id]=c,TEST._cookie_start_at=TEST.start_at,s(),++TEST.start_at>TEST.questions.length)return;TEST.current_question=TEST.questions[TEST.start_at-1],i()}else t(".question, .anscont",T).addClass("shake"),a.removeClass("disabled"),t('input[name="answer"]',T).last().focus();r()}}),t(document).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",".question, .anscont",function(e){t(this).delay(200).removeClass("shake")}),t(document).on("click",".qnav.back:not(.disabled)",function(e){e.preventDefault(),TEST.start_at<2?t(this).addClass("disabled"):(TEST.start_at--,TEST.current_question=TEST.questions[TEST.start_at-1],i()),r()}),t.fn.animateText=function(){t("body").hasClass("is-mobile")||t(this).fadeToggle(20).fadeToggle(200)},TEST.sync(i)}});